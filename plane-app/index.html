<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Perspective Plane — Commons↔Commerce × Club↔Crown</title>
<style>
:root{--bg:#0b0f14;--panel:#121821;--ink:#e6edf3;--muted:#9fb0c3;--accent:#82cfff}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font:14px/1.4 system-ui,Segoe UI,Roboto,Inter,Arial}
h1{font-size:18px;margin:12px 0} h2{font-size:16px;margin:10px 0}
.wrap{display:grid;grid-template-columns:340px 1fr;gap:14px;padding:14px}
.card{background:var(--panel);border-radius:14px;padding:12px;box-shadow:0 2px 12px rgba(0,0,0,.35)}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
label{color:var(--muted)} input[type="range"]{width:120px}
.small{font-size:12px;color:var(--muted)}
.legend{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 10px}
.pill{display:inline-flex;gap:6px;align-items:center;border:1px solid #233043;padding:3px 8px;border-radius:999px}
.sw{display:inline-flex;gap:8px;align-items:center;margin:6px 0}
button,select{background:#1a2432;color:var(--ink);border:1px solid #2a3a51;border-radius:8px;padding:6px 10px;cursor:pointer}
button:hover{border-color:#3c567a} canvas{background:#0b0f14;border-radius:12px}
.gridlab{display:flex;justify-content:space-between;color:var(--muted);font-size:12px;margin-top:4px}
.explain{white-space:pre-wrap;background:#0d1219;border:1px solid #213046;border-radius:10px;padding:10px;max-height:240px;overflow:auto}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}.hr{height:1px;background:#233043;margin:10px 0}
.kbd{font:12px ui-monospace,Menlo,Consolas;background:#0d1219;border:1px solid #213046;padding:1px 6px;border-radius:6px;color:#c7d6ea}
</style><style>
  :root{--cp-bg:#0b1220;--cp-card:#0f1623;--cp-border:#2a3b55;--cp-text:#e5f0ff;--cp-sub:#9fb7dd;--cp-accent:#0b3d91}
  .card{background:var(--cp-card);border:1px solid var(--cp-border);border-radius:14px;padding:16px;color:var(--cp-text);box-shadow:0 2px 12px rgba(0,0,0,.25)}
  .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--cp-border);border-radius:999px;margin:4px;background:rgba(255,255,255,.03);font:13px/1.2 system-ui}
  .panel{display:grid;grid-template-columns:1fr;gap:12px}
  .row{display:grid;grid-template-columns:170px 1fr 48px;gap:8px;align-items:center}
  input[type="range"]{accent-color:var(--cp-accent)}
  .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .toolbar label{display:flex;gap:6px;align-items:center;color:var(--cp-sub)}
  #explain{white-space:pre-wrap;font:13px ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;background:#0b1220;border:1px dashed #2a3b55;border-radius:12px;padding:12px;color:#cfe3ff}
  @media (max-width:720px){.row{grid-template-columns:130px 1fr 42px}.toolbar{flex-direction:column;align-items:flex-start}canvas#plane{max-width:100%;height:auto}}
</style>
</head><body>
<div class="wrap">
  <div class="card">
    <h1>Perspective Plane</h1>
    <div class="small">Canon axes: <b>X = Commons → Commerce</b>, <b>Y = Club → Crown</b>. Weight domains; click a point to see why it’s there.</div>
    <div class="hr"></div>
    <h2>Domain weights</h2><div id="domains"></div>
    <div class="row"><label>Total = <span id="wTotal">0</span></label><button id="equalize">Equalize</button><button id="resetW">Reset</button></div>
    <div class="hr"></div>
    <h2>View & options</h2>
    <div class="row">
      <label class="sw"><input type="checkbox" id="flipX"> Flip X</label>
      <label class="sw"><input type="checkbox" id="flipY"> Flip Y</label>
      <label class="sw"><input type="checkbox" id="swapXY"> Swap axes</label>
    </div>
    <div class="row">
      <label class="sw"><input type="checkbox" id="trail"> Show trails</label>
      <label class="sw"><input type="checkbox" id="error"> Show error bars</label>
    </div>
    <div class="hr"></div>
    <h2>Entities</h2><div class="legend" id="legend"></div>
    <div class="row"><button id="toggleCountries">Toggle countries</button><button id="toggleParties">Toggle US parties</button><button id="toggleModes">Toggle CoCivium modes</button></div>
    <div class="small">Tip: hold <span class="kbd">Shift</span> while clicking canvas to pin explanations.</div>
  </div>
  <div class="card">
    <canvas id="plane" width="1000" height="700"></canvas>
    <div class="gridlab"><span>← Commons</span><span>Commerce →</span></div>
    <div class="gridlab" style="justify-content:center;margin-top:-18px;"><span>↑ Crown</span><span style="margin-left:16px">↓ Club</span></div>
    <div class="hr"></div><h2>Explanation</h2><div class="explain mono" id="explain">Click a point to see per-domain contributions and notes.</div>
  </div>
</div>
<script>
/* --- BEGIN Perspective Plane upgraded script (CoPolitic) --- */
/* paste the full upgraded script BETWEEN these <script> tags – not at the PS prompt. */
/* It’s the version with: permalink (URL hash), flip/swap, hover crosshair, trails, error bars,
   domain sliders normalization, legend builder, quadrant tints, and click-to-explain. */
/* --- END Perspective Plane upgraded script (CoPolitic) --- */
</script></body></html>